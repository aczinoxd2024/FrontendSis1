<div class="min-h-screen bg-gray-900 text-white p-6 md:p-10">
  <h2 class="text-3xl font-bold text-rose-500 mb-8 neon-text">üßë‚Äçüíº Gesti√≥n de Personal</h2>

  <!-- Formulario de Registro / Edici√≥n -->
  <form (ngSubmit)="guardarPersonal()" #personalForm="ngForm"
        class="bg-gray-800 rounded-2xl shadow-xl p-6 grid grid-cols-1 md:grid-cols-2 gap-6 mb-12">

    <!-- CI -->
    <div>
      <label class="block mb-2 font-semibold text-sm text-gray-300">CI</label>
      <input type="text" [(ngModel)]="nuevoPersonal.CI" name="CI" required #CI="ngModel"
             [readonly]="editando"
             class="w-full p-3 rounded-xl bg-gray-700 text-white border focus:ring-2 focus:ring-rose-500" />
      <div *ngIf="CI.invalid && CI.touched" class="text-red-400 text-sm mt-1">‚ö†Ô∏è Campo obligatorio</div>
    </div>

    <!-- Nombre -->
    <div>
      <label class="block mb-2 font-semibold text-sm text-gray-300">Nombre</label>
      <input type="text" [(ngModel)]="nuevoPersonal.Nombre" name="Nombre" required #Nombre="ngModel"
             class="w-full p-3 rounded-xl bg-gray-700 text-white border focus:ring-2 focus:ring-rose-500" />
      <div *ngIf="Nombre.invalid && Nombre.touched" class="text-red-400 text-sm mt-1">‚ö†Ô∏è Campo obligatorio</div>
    </div>

    <!-- Apellido -->
    <div>
      <label class="block mb-2 font-semibold text-sm text-gray-300">Apellido</label>
      <input type="text" [(ngModel)]="nuevoPersonal.Apellido" name="Apellido" required #Apellido="ngModel"
             class="w-full p-3 rounded-xl bg-gray-700 text-white border focus:ring-2 focus:ring-rose-500" />
      <div *ngIf="Apellido.invalid && Apellido.touched" class="text-red-400 text-sm mt-1">‚ö†Ô∏è Campo obligatorio</div>
    </div>

    <!-- Tel√©fono -->
    <div>
      <label class="block mb-2 font-semibold text-sm text-gray-300">Tel√©fono</label>
      <input type="text" [(ngModel)]="nuevoPersonal.Telefono" name="Telefono"
             class="w-full p-3 rounded-xl bg-gray-700 text-white border focus:ring-2 focus:ring-rose-500" />
    </div>

    <!-- Direcci√≥n -->
    <div>
      <label class="block mb-2 font-semibold text-sm text-gray-300">Direcci√≥n</label>
      <input type="text" [(ngModel)]="nuevoPersonal.Direccion" name="Direccion" required #Direccion="ngModel"
             class="w-full p-3 rounded-xl bg-gray-700 text-white border focus:ring-2 focus:ring-rose-500" />
      <div *ngIf="Direccion.invalid && Direccion.touched" class="text-red-400 text-sm mt-1">‚ö†Ô∏è Campo obligatorio</div>
    </div>

    <!-- Correo -->
    <div *ngIf="!editando">
      <label class="block mb-2 font-semibold text-sm text-gray-300">Correo Electr√≥nico</label>
      <input type="email" [(ngModel)]="nuevoPersonal.correo" name="correo" required #correo="ngModel"
             class="w-full p-3 rounded-xl bg-gray-700 text-white border focus:ring-2 focus:ring-rose-500" />
      <div *ngIf="correo.invalid && correo.touched" class="text-red-400 text-sm mt-1">‚ö†Ô∏è Correo v√°lido requerido</div>
    </div>

    <div *ngIf="editando">
      <label class="block mb-2 font-semibold text-sm text-gray-300">Correo Electr√≥nico (no editable)</label>
      <div class="w-full p-3 rounded-xl bg-gray-700 text-white border">{{ nuevoPersonal.correo || '-' }}</div>
    </div>

    <!-- Fecha de Nacimiento -->
    <div>
      <label class="block mb-2 font-semibold text-sm text-gray-300">Fecha de Nacimiento</label>
      <input type="date" [(ngModel)]="nuevoPersonal.FechaNacimiento" name="FechaNacimiento" required
             class="w-full p-3 rounded-xl bg-gray-700 text-white border focus:ring-2 focus:ring-rose-500" />
    </div>

    <!-- Fecha de Contrataci√≥n -->
    <div>
      <label class="block mb-2 font-semibold text-sm text-gray-300">Fecha de Contrataci√≥n</label>
      <input type="date" [(ngModel)]="nuevoPersonal.FechaContratacion" name="FechaContratacion" required
             class="w-full p-3 rounded-xl bg-gray-700 text-white border focus:ring-2 focus:ring-rose-500" />
    </div>

    <!-- √Årea -->
    <div>
      <label class="block mb-2 font-semibold text-sm text-gray-300">√Årea</label>
      <input type="text" [(ngModel)]="nuevoPersonal.AreaP" name="AreaP" required
             class="w-full p-3 rounded-xl bg-gray-700 text-white border focus:ring-2 focus:ring-rose-500" />
    </div>

    <!-- Sueldo -->
    <div>
      <label class="block mb-2 font-semibold text-sm text-gray-300">Sueldo (Bs)</label>
      <input type="number" step="0.01" [(ngModel)]="nuevoPersonal.Sueldo" name="Sueldo" required
             class="w-full p-3 rounded-xl bg-gray-700 text-white border focus:ring-2 focus:ring-rose-500" />
    </div>

    <!-- Cargo -->
    <div>
      <label class="block mb-2 font-semibold text-sm text-gray-300">Cargo</label>
      <select [(ngModel)]="nuevoPersonal.Cargo" name="Cargo" required
              class="w-full p-3 rounded-xl bg-gray-700 text-white focus:ring-2 focus:ring-rose-500">
        <option value="" disabled selected>Seleccione un cargo</option>
        <option value="Instructor">Instructor</option>
        <option value="Recepcionista">Recepcionista</option>
      </select>
    </div>

    <!-- Botones -->
    <div class="flex items-end gap-3">
      <button *ngIf="!editando" type="submit"
              [disabled]="personalForm.invalid"
              class="bg-rose-600 hover:bg-rose-700 px-4 py-2 rounded-xl shadow text-white font-semibold transition hover:scale-105">
        Registrar
      </button>

      <div *ngIf="editando" class="flex gap-3">
        <button type="submit"
                class="bg-yellow-500 hover:bg-yellow-600 px-4 py-2 rounded-xl text-black font-semibold shadow">
          Actualizar
        </button>
        <button type="button" (click)="resetFormulario()"
                class="bg-gray-600 hover:bg-gray-700 px-4 py-2 rounded-xl text-white font-semibold shadow">
          Cancelar
        </button>
      </div>
    </div>
  </form>

  <!-- Tabla con scroll -->
  <div class="relative bg-gray-800 rounded-2xl shadow-lg p-4 max-h-[400px] overflow-y-auto">
    <h3 class="text-xl font-semibold text-rose-400 mb-4">üìÑ Personal Registrado</h3>
    <table class="min-w-full table-auto text-white text-sm">
      <thead class="bg-gray-700 sticky top-0 z-30">
        <tr>
          <th class="px-4 py-2">CI</th>
          <th class="px-4 py-2">Nombre</th>
          <th class="px-4 py-2">Apellido</th>
          <th class="px-4 py-2">Tel√©fono</th>
          <th class="px-4 py-2">√Årea</th>
          <th class="px-4 py-2">Cargo</th>
          <th class="px-4 py-2">Estado</th>
          <th class="px-4 py-2">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let p of listaPersonal" class="hover:bg-gray-700 transition">
          <td class="px-4 py-2">{{ p.CI || '-' }}</td>
          <td class="px-4 py-2">{{ p.persona?.Nombre || '-' }}</td>
          <td class="px-4 py-2">{{ p.persona?.Apellido || '-' }}</td>
          <td class="px-4 py-2">{{ p.persona?.Telefono || '-' }}</td>
          <td class="px-4 py-2">{{ p.AreaP || '-' }}</td>
          <td class="px-4 py-2">{{ p.Cargo || '-' }}</td>
          <td class="px-4 py-2">
            <span [ngClass]="{
              'text-green-400 font-semibold': p.usuario?.idEstadoU === 1,
              'text-red-400 font-semibold': p.usuario?.idEstadoU === 2
            }">
              {{ p.usuario?.idEstadoU === 1 ? 'Activo' : (p.usuario?.idEstadoU === 2 ? 'Inactivo' : 'Sin acceso') }}
            </span>
          </td>
          <td class="px-4 py-2 flex gap-2">
            <button (click)="editarPersonal(p)" class="bg-yellow-500 hover:bg-yellow-600 text-white px-2 py-1 rounded shadow text-sm">‚úèÔ∏è</button>
            <button *ngIf="p.usuario?.idEstadoU === 1" (click)="eliminarPersonal(p.CI)" class="bg-red-600 hover:bg-red-700 text-white px-2 py-1 rounded shadow text-sm">üóëÔ∏è</button>
            <button *ngIf="p.usuario?.idEstadoU === 2" (click)="reactivarPersonal(p.CI)" class="bg-green-600 hover:bg-green-700 text-white px-2 py-1 rounded shadow text-sm">üîì</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<style>
  thead th {
    background-color: #374151; /* bg-gray-700 */
  }

  /* Sombra inferior para separarlo visualmente al hacer scroll */
  thead.sticky::after {
    content: '';
    position: absolute;
    bottom: -1px;
    left: 0;
    right: 0;
    height: 1px;
    background: rgba(255, 255, 255, 0.1);
  }
</style>
